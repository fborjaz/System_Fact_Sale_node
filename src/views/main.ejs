<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('partials/header') %>
  <title>Clientes Registrados</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/interfaces/css/main.css">
</head>

<body>
  <%- include('partials/navigation001.ejs') %>
  <div class="container mt-5">
    <h2>Clientes Registrados</h2>

    <% if (clients.length === 0) { %>
      <div class="alert alert-info">No hay clientes registrados.</div>
    <% } else { %>
      <div class="row">
        <% clients.forEach(client => { %>
          <div class="col-md-6 mb-4">
            <div class="card">
              <div class="card-header">
                <h5 class="card-title">Cliente</h5>
              </div>
              <div class="card-body">
                <p><strong>Nombre:</strong> <%= client.nombre %> <%= client.apellido %></p>
                <p><strong>Cédula:</strong> <%= client.dni %></p>
                <p><strong>Tipo:</strong> <%= client.tipo %></p>
                <% if (client.tipo === 'regular') { %>
                  <p><strong>Descuento:</strong> <%= client.descuento %>%</p>
                  <p><strong>Tarjeta:</strong> <%= client.card ? 'Sí' : 'No' %></p>
                <% } else if (client.tipo === 'vip') { %>
                  <p><strong>Límite de crédito:</strong> $<%= client.limit %></p>
                <% } %>
              </div>
              <div class="card-footer d-flex justify-content-between align-items-center">
                <a href="/clientes/<%= client.dni %>/editar" class="btn btn-primary">Editar</a>
                <a href="/clientes/<%= client.dni %>/eliminar" class="btn btn-danger"
                   onclick="return confirm('¿Estás seguro de que deseas eliminar este cliente?')">Eliminar</a>
              </div>
            </div>
          </div>
        <% }) %>
      </div>
    <% } %>

    <a href="/clientes/crear" class="btn btn-success mt-3">Nuevo Cliente</a>
  </div>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
</html>
